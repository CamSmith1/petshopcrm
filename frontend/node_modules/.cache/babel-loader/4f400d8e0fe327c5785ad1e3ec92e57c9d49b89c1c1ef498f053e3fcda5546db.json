{"ast":null,"code":"import React,{useState,useEffect,useContext,useRef}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import AuthContext from'../context/AuthContext';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VenueImages=()=>{const{id}=useParams();const navigate=useNavigate();const{user}=useContext(AuthContext);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[venue,setVenue]=useState(null);const[images,setImages]=useState([]);const[uploadingImage,setUploadingImage]=useState(false);const[imagePreview,setImagePreview]=useState(null);const[imageDescription,setImageDescription]=useState('');const[isPrimary,setIsPrimary]=useState(false);const fileInputRef=useRef(null);// Load venue and images data\nuseEffect(()=>{fetchVenueData();},[id]);const fetchVenueData=async()=>{try{setLoading(true);// Fetch venue details\nconst venueResponse=await api.getVenue(id);setVenue(venueResponse.data.venue);// Fetch images\nconst imagesResponse=await api.getVenueImages(id);setImages(imagesResponse.data.images||[]);setLoading(false);}catch(err){console.error('Error fetching venue data:',err);setError('Error loading venue data. Please try again.');setLoading(false);}};// Handle file selection\nconst handleFileChange=e=>{const file=e.target.files[0];if(!file)return;// Validate file type\nconst validTypes=['image/jpeg','image/png','image/gif','image/webp'];if(!validTypes.includes(file.type)){setError('Please select a valid image file (JPEG, PNG, GIF, or WEBP).');return;}// Validate file size (max 5MB)\nif(file.size>5*1024*1024){setError('Image size must be less than 5MB.');return;}// Create preview\nconst reader=new FileReader();reader.onload=e=>{setImagePreview(e.target.result);};reader.readAsDataURL(file);};// Clear form\nconst clearForm=()=>{setImagePreview(null);setImageDescription('');setIsPrimary(false);if(fileInputRef.current){fileInputRef.current.value='';}};// Handle form submission\nconst handleUploadImage=async e=>{e.preventDefault();if(!imagePreview){setError('Please select an image to upload.');return;}try{setUploadingImage(true);const file=fileInputRef.current.files[0];// In a real implementation, this would upload the file to the server\n// For now, we'll simulate a successful upload with a mock response\n// Mock upload response\nconst newImage={id:Date.now().toString(),venue_id:id,url:imagePreview,description:imageDescription,is_primary:isPrimary,created_at:new Date().toISOString()};// If this is set as primary, update all other images to not be primary\nif(isPrimary){setImages(prevImages=>prevImages.map(img=>({...img,is_primary:false})));}// Add new image to state\nsetImages(prev=>[...prev,newImage]);// Clear form\nclearForm();setUploadingImage(false);}catch(err){console.error('Error uploading image:',err);setError('Error uploading image. Please try again.');setUploadingImage(false);}};// Set image as primary\nconst handleSetPrimary=async imageId=>{try{// In a real implementation, this would call the API\n// For now, we'll update the local state directly\nsetImages(prevImages=>prevImages.map(img=>({...img,is_primary:img.id===imageId})));}catch(err){console.error('Error setting primary image:',err);setError('Error setting primary image. Please try again.');}};// Delete image\nconst handleDeleteImage=async imageId=>{if(!window.confirm('Are you sure you want to delete this image? This action cannot be undone.')){return;}try{// In a real implementation, this would call the API\n// For now, we'll update the local state directly\nsetImages(prevImages=>prevImages.filter(img=>img.id!==imageId));}catch(err){console.error('Error deleting image:',err);setError('Error deleting image. Please try again.');}};// Access restriction removed to allow all users to manage images\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading venue images...\"});}if(!venue){return/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:\"Venue not found.\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"venue-images-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Manage Images - \",venue.name]}),/*#__PURE__*/_jsx(Link,{to:\"/manage-venues\",className:\"btn btn-link\",children:\"Back to Venues\"})]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"upload-form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upload New Image\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUploadImage,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"image\",children:[\"Select Image \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image\",name:\"image\",className:\"form-control-file\",onChange:handleFileChange,accept:\"image/*\",ref:fileInputRef,required:true}),/*#__PURE__*/_jsx(\"small\",{className:\"form-text text-muted\",children:\"Max size: 5MB. Supported formats: JPEG, PNG, GIF, WEBP.\"})]}),imagePreview&&/*#__PURE__*/_jsx(\"div\",{className:\"image-preview mb-3\",children:/*#__PURE__*/_jsx(\"img\",{src:imagePreview,alt:\"Preview\",className:\"img-fluid\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Image Description\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"description\",name:\"description\",className:\"form-control\",value:imageDescription,onChange:e=>setImageDescription(e.target.value),placeholder:\"e.g., Front view, Main hall, Kitchen area\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"is_primary\",name:\"is_primary\",className:\"form-check-input\",checked:isPrimary,onChange:e=>setIsPrimary(e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"is_primary\",className:\"form-check-label\",children:\"Set as primary image (main venue photo)\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-100\",disabled:uploadingImage||!imagePreview,children:uploadingImage?'Uploading...':'Upload Image'})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"images-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Venue Images\"}),images.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-images\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No images have been uploaded for this venue yet.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Upload images to showcase your venue to potential customers.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"images-grid\",children:images.map(image=>/*#__PURE__*/_jsxs(\"div\",{className:`image-card ${image.is_primary?'primary-image':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:image.url,alt:image.description||'Venue image'}),image.is_primary&&/*#__PURE__*/_jsx(\"div\",{className:\"primary-badge\",children:\"Primary Image\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-details\",children:[image.description&&/*#__PURE__*/_jsx(\"p\",{className:\"image-description\",children:image.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-actions\",children:[!image.is_primary&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-primary\",onClick:()=>handleSetPrimary(image.id),children:\"Set as Primary\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-danger\",onClick:()=>handleDeleteImage(image.id),children:\"Delete\"})]})]})]},image.id))})]})})]})]})});};export default VenueImages;","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","useParams","useNavigate","Link","AuthContext","api","jsx","_jsx","jsxs","_jsxs","VenueImages","id","navigate","user","loading","setLoading","error","setError","venue","setVenue","images","setImages","uploadingImage","setUploadingImage","imagePreview","setImagePreview","imageDescription","setImageDescription","isPrimary","setIsPrimary","fileInputRef","fetchVenueData","venueResponse","getVenue","data","imagesResponse","getVenueImages","err","console","handleFileChange","e","file","target","files","validTypes","includes","type","size","reader","FileReader","onload","result","readAsDataURL","clearForm","current","value","handleUploadImage","preventDefault","newImage","Date","now","toString","venue_id","url","description","is_primary","created_at","toISOString","prevImages","map","img","prev","handleSetPrimary","imageId","handleDeleteImage","window","confirm","filter","className","children","name","to","role","onSubmit","htmlFor","onChange","accept","ref","required","src","alt","placeholder","checked","disabled","length","image","onClick"],"sources":["/home/toebot/dog-services-saas/frontend/src/pages/VenueImages.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport AuthContext from '../context/AuthContext';\nimport api from '../services/api';\n\nconst VenueImages = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { user } = useContext(AuthContext);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [venue, setVenue] = useState(null);\n  const [images, setImages] = useState([]);\n  const [uploadingImage, setUploadingImage] = useState(false);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [imageDescription, setImageDescription] = useState('');\n  const [isPrimary, setIsPrimary] = useState(false);\n  const fileInputRef = useRef(null);\n  \n  // Load venue and images data\n  useEffect(() => {\n    fetchVenueData();\n  }, [id]);\n  \n  const fetchVenueData = async () => {\n    try {\n      setLoading(true);\n      \n      // Fetch venue details\n      const venueResponse = await api.getVenue(id);\n      setVenue(venueResponse.data.venue);\n      \n      // Fetch images\n      const imagesResponse = await api.getVenueImages(id);\n      setImages(imagesResponse.data.images || []);\n      \n      setLoading(false);\n    } catch (err) {\n      console.error('Error fetching venue data:', err);\n      setError('Error loading venue data. Please try again.');\n      setLoading(false);\n    }\n  };\n  \n  // Handle file selection\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    \n    // Validate file type\n    const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n    if (!validTypes.includes(file.type)) {\n      setError('Please select a valid image file (JPEG, PNG, GIF, or WEBP).');\n      return;\n    }\n    \n    // Validate file size (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      setError('Image size must be less than 5MB.');\n      return;\n    }\n    \n    // Create preview\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      setImagePreview(e.target.result);\n    };\n    reader.readAsDataURL(file);\n  };\n  \n  // Clear form\n  const clearForm = () => {\n    setImagePreview(null);\n    setImageDescription('');\n    setIsPrimary(false);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n  \n  // Handle form submission\n  const handleUploadImage = async (e) => {\n    e.preventDefault();\n    \n    if (!imagePreview) {\n      setError('Please select an image to upload.');\n      return;\n    }\n    \n    try {\n      setUploadingImage(true);\n      \n      const file = fileInputRef.current.files[0];\n      \n      // In a real implementation, this would upload the file to the server\n      // For now, we'll simulate a successful upload with a mock response\n      \n      // Mock upload response\n      const newImage = {\n        id: Date.now().toString(),\n        venue_id: id,\n        url: imagePreview,\n        description: imageDescription,\n        is_primary: isPrimary,\n        created_at: new Date().toISOString()\n      };\n      \n      // If this is set as primary, update all other images to not be primary\n      if (isPrimary) {\n        setImages(prevImages => \n          prevImages.map(img => ({\n            ...img,\n            is_primary: false\n          }))\n        );\n      }\n      \n      // Add new image to state\n      setImages(prev => [...prev, newImage]);\n      \n      // Clear form\n      clearForm();\n      \n      setUploadingImage(false);\n    } catch (err) {\n      console.error('Error uploading image:', err);\n      setError('Error uploading image. Please try again.');\n      setUploadingImage(false);\n    }\n  };\n  \n  // Set image as primary\n  const handleSetPrimary = async (imageId) => {\n    try {\n      // In a real implementation, this would call the API\n      // For now, we'll update the local state directly\n      \n      setImages(prevImages => \n        prevImages.map(img => ({\n          ...img,\n          is_primary: img.id === imageId\n        }))\n      );\n    } catch (err) {\n      console.error('Error setting primary image:', err);\n      setError('Error setting primary image. Please try again.');\n    }\n  };\n  \n  // Delete image\n  const handleDeleteImage = async (imageId) => {\n    if (!window.confirm('Are you sure you want to delete this image? This action cannot be undone.')) {\n      return;\n    }\n    \n    try {\n      // In a real implementation, this would call the API\n      // For now, we'll update the local state directly\n      \n      setImages(prevImages => prevImages.filter(img => img.id !== imageId));\n    } catch (err) {\n      console.error('Error deleting image:', err);\n      setError('Error deleting image. Please try again.');\n    }\n  };\n  \n  // Access restriction removed to allow all users to manage images\n  \n  if (loading) {\n    return <div className=\"loading\">Loading venue images...</div>;\n  }\n  \n  if (!venue) {\n    return <div className=\"error-message\">Venue not found.</div>;\n  }\n  \n  return (\n    <div className=\"venue-images-page\">\n      <div className=\"container\">\n        <div className=\"page-header\">\n          <div className=\"header-content\">\n            <h1>Manage Images - {venue.name}</h1>\n            <Link to=\"/manage-venues\" className=\"btn btn-link\">\n              Back to Venues\n            </Link>\n          </div>\n        </div>\n        \n        {error && (\n          <div className=\"alert alert-danger\" role=\"alert\">\n            {error}\n          </div>\n        )}\n        \n        <div className=\"row\">\n          <div className=\"col-md-4\">\n            <div className=\"upload-form-container\">\n              <h2>Upload New Image</h2>\n              <form onSubmit={handleUploadImage}>\n                <div className=\"form-group\">\n                  <label htmlFor=\"image\">Select Image <span className=\"required\">*</span></label>\n                  <input\n                    type=\"file\"\n                    id=\"image\"\n                    name=\"image\"\n                    className=\"form-control-file\"\n                    onChange={handleFileChange}\n                    accept=\"image/*\"\n                    ref={fileInputRef}\n                    required\n                  />\n                  <small className=\"form-text text-muted\">\n                    Max size: 5MB. Supported formats: JPEG, PNG, GIF, WEBP.\n                  </small>\n                </div>\n                \n                {imagePreview && (\n                  <div className=\"image-preview mb-3\">\n                    <img src={imagePreview} alt=\"Preview\" className=\"img-fluid\" />\n                  </div>\n                )}\n                \n                <div className=\"form-group\">\n                  <label htmlFor=\"description\">Image Description</label>\n                  <input\n                    type=\"text\"\n                    id=\"description\"\n                    name=\"description\"\n                    className=\"form-control\"\n                    value={imageDescription}\n                    onChange={(e) => setImageDescription(e.target.value)}\n                    placeholder=\"e.g., Front view, Main hall, Kitchen area\"\n                  />\n                </div>\n                \n                <div className=\"form-check mb-3\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"is_primary\"\n                    name=\"is_primary\"\n                    className=\"form-check-input\"\n                    checked={isPrimary}\n                    onChange={(e) => setIsPrimary(e.target.checked)}\n                  />\n                  <label htmlFor=\"is_primary\" className=\"form-check-label\">\n                    Set as primary image (main venue photo)\n                  </label>\n                </div>\n                \n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary w-100\"\n                  disabled={uploadingImage || !imagePreview}\n                >\n                  {uploadingImage ? 'Uploading...' : 'Upload Image'}\n                </button>\n              </form>\n            </div>\n          </div>\n          \n          <div className=\"col-md-8\">\n            <div className=\"images-container\">\n              <h2>Venue Images</h2>\n              \n              {images.length === 0 ? (\n                <div className=\"no-images\">\n                  <p>No images have been uploaded for this venue yet.</p>\n                  <p>Upload images to showcase your venue to potential customers.</p>\n                </div>\n              ) : (\n                <div className=\"images-grid\">\n                  {images.map(image => (\n                    <div key={image.id} className={`image-card ${image.is_primary ? 'primary-image' : ''}`}>\n                      <div className=\"image-wrapper\">\n                        <img src={image.url} alt={image.description || 'Venue image'} />\n                        {image.is_primary && (\n                          <div className=\"primary-badge\">\n                            Primary Image\n                          </div>\n                        )}\n                      </div>\n                      \n                      <div className=\"image-details\">\n                        {image.description && (\n                          <p className=\"image-description\">{image.description}</p>\n                        )}\n                        \n                        <div className=\"image-actions\">\n                          {!image.is_primary && (\n                            <button\n                              className=\"btn btn-sm btn-outline-primary\"\n                              onClick={() => handleSetPrimary(image.id)}\n                            >\n                              Set as Primary\n                            </button>\n                          )}\n                          <button\n                            className=\"btn btn-sm btn-outline-danger\"\n                            onClick={() => handleDeleteImage(image.id)}\n                          >\n                            Delete\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VenueImages;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}